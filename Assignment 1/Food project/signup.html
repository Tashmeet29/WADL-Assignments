<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="signup-section">
        <h2>User Registration / Signup</h2>
        <form id="signup-form" action="#" method="post" oninput="checkFormValidity()">
            <div class="form-group">
                <label for="id">ID <span class="required"></span></label>
                <input type="text" id="id" name="id" autocomplete="on" required>
                <span id="id-error" class="error"></span>
            </div>
            <!-- Add autocomplete attribute to other input fields as needed -->
            <div class="form-group">
                <label for="name">Name <span class="required"></span></label>
                <input type="text" id="name" name="name" autocomplete="on" required oninput="checkNameValidity()">
                <span id="name-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="username">Username <span class="required"></span></label>
                <input type="text" id="username" name="username" autocomplete="on" required>
                <span id="username-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="password">Password <span class="required"></span></label>
                <input type="password" id="password" name="password" autocomplete="on" required>
                <span id="password-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="email">Email <span class="required"></span></label>
                <input type="email" id="email" name="email" autocomplete="on" required>
                <span id="email-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="mobile">Mobile Number <span class="required"></span></label>
                <input type="text" id="mobile" name="mobile" autocomplete="on" required>
                <span id="mobile-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="dob">DOB <span class="required"></span></label>
                <input type="date" id="dob" name="dob" max="2004-12-31" autocomplete="on" required>
            </div>
            <div class="form-group">
                <label>Gender <span class="required"></span></label>
                <div class="radio-group">
                    <input type="radio" id="male" name="gender" value="male" autocomplete="on" required>
                    <label class="text" for="male">Male</label>                   
                    <input type="radio" id="female" name="gender" value="female" autocomplete="on" required>
                    <label class="text" for="female">Female</label>
                </div>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <div class="address-container">
                    <textarea id="address" name="address" rows="3" class="address-textarea"></textarea>
                </div>
            </div>                               
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city" required>
                <span id="city-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="pincode">Pincode <span class="required"></span></label>
                <input type="text" id="pincode" name="pincode" required>
                <span id="pincode-error" class="error"></span>
            </div>
            <div class="form-group">
                <label for="state">State</label>
                <select id="state" name="state" required>
                    <option value="" disabled selected>Select state</option>
                    <option value="state2">Maharashtra</option>
                    <option value="state3">Madhya Pradesh</option>
                    <option value="state4">Punjab</option>
                    <option value="state5">Rajasthan</option>
                    <option value="state6">Gujarat</option>
                </select>
            </div>
            <div class="form-group">
                <label>Food Taste</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="spicy" name="foodTaste[]" value="spicy">
                    <label class="text" for="spicy">Spicy</label>
                    <input type="checkbox" id="sweet" name="foodTaste[]" value="sweet">
                    <label class="text" for="sweet">Sweet</label>
                </div>
            </div>
            <div class="form-group">
                <button type="submit" id="submit-button" onclick="submitForm()" disabled>Submit</button>
                <button type="button" class="cancel-btn">Cancel</button>
            </div>
        </form>
    </div>

        <script>

            function checkFormValidity() {
            const form = document.getElementById('signup-form');
            const submitButton = document.getElementById('submit-button');
            
            // ID validation
            const idInput = document.getElementById('id');
            const idError = document.getElementById('id-error');
            
            if (!/^[A-Za-z0-9]+$/.test(idInput.value)) {
                idError.textContent = 'Only numbers and alphabets are allowed';
                submitButton.disabled = true;
            } else {
                idError.textContent = '';
            }
            
            // Name validation
            const nameInput = document.getElementById('name');
            const nameError = document.getElementById('name-error');

            if (!/^[A-Za-z\s]+$/.test(nameInput.value)) {
                nameError.textContent = 'Only alphabets and spaces are allowed';
                submitButton.disabled = true;
            } else {
                nameError.textContent = '';
            }

            // Username validation
            const usernameInput = document.getElementById('username');
            const usernameError = document.getElementById('username-error');
            
            if (/\s/.test(usernameInput.value)) {
                usernameError.textContent = 'No spaces allowed in the username';
                submitButton.disabled = true;
            } else {
                usernameError.textContent = '';
            }
            
            // Password validation
            const passwordInput = document.getElementById('password');
            const passwordError = document.getElementById('password-error');
            
            if (!/^(?=.*[0-9])(?=.*[@#&$*])[a-zA-Z0-9@#&$*]{8,}$/.test(passwordInput.value)) {
                passwordError.textContent = 'Password must be at least 8 characters and at least 1 numbers and can only contain at least 1 special character from @#&$*';
                submitButton.disabled = true;
            } else {
                passwordError.textContent = '';
            }

            // Email validation
            const emailInput = document.getElementById('email');
            const emailError = document.getElementById('email-error');
            
            // Email format validation
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                emailError.textContent = 'Enter a valid email address';
                submitButton.disabled = true;
            } else {
                emailError.textContent = '';
            }

            // Mobile Number validation
            const mobileInput = document.getElementById('mobile');
            const mobileError = document.getElementById('mobile-error');

            // Check if the mobile number contains only numbers and is 10 digits long
            if (!/^\d{10}$/.test(mobileInput.value)) {
                mobileError.textContent = 'Enter a valid 10-digit mobile number';
                submitButton.disabled = true;
            } else {
                mobileError.textContent = '';
            }

            // Additional validation checks
            const cityInput = document.getElementById('city');
            const cityError = document.getElementById('city-error');

            // Check if the city contains only alphabets
            if (!/^[A-Za-z]+$/.test(cityInput.value)) {
                cityError.textContent = 'Only alphabets are allowed';
                submitButton.disabled = true;
            } else {
                cityError.textContent = '';
            }

            const pincodeInput = document.getElementById('pincode');
            const pincodeError = document.getElementById('pincode-error');

            // Check if the pincode contains only numbers
            if (!/^\d+$/.test(pincodeInput.value)) {
                pincodeError.textContent = 'Only numbers are allowed';
                submitButton.disabled = true;
            } else {
                pincodeError.textContent = '';
            }

             // Overall form validity
             if (form.checkValidity()) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }

        function submitForm(event) {
                event.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;

                const userData = {
                    email: email,
                    password: password
                };

                localStorage.setItem('userData', JSON.stringify(userData));
                
                // Send data to server using Fetch API
                setTimeout(() => {
                alert('Signup successful! Redirecting to login page.');
                window.location.href = 'login.html';
            }, 1000); // Delayed for demonstration purposes
        }

        const form = document.getElementById('signup-form');
        const submitButton = document.getElementById('submit-button');

        form.addEventListener('input', checkFormValidity);
        form.addEventListener('submit', submitForm);
    </script>
</body>
</html>